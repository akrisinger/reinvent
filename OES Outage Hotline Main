{"modules":[{"id":"8fbbc240-12ee-47b7-9aa3-4c92b2f4ea45","type":"SetVoice","branches":[{"condition":"Success","transition":"49f4b81c-93b4-4546-b308-1f8c27598176"}],"parameters":[{"name":"GlobalVoice","value":"Joanna"}],"metadata":{"position":{"x":178,"y":14}}},{"id":"80ad600d-9282-4153-a09b-f38c0f934b42","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2662,"y":467}}},{"id":"1408a9f5-4199-4961-8644-9c8895c94f21","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":4239,"y":1104}}},{"id":"5b7cf4a2-2b1d-4041-9a44-b7680e89591c","type":"SetQueue","branches":[{"condition":"Success","transition":"251a8bed-34a3-4c6a-bdb8-96775b445912"},{"condition":"Error","transition":"251a8bed-34a3-4c6a-bdb8-96775b445912"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/queue/5a677514-8fa2-4164-8419-78a9531b7935","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":3719,"y":1170},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/queue/5a677514-8fa2-4164-8419-78a9531b7935","text":"BasicQueue"}}},{"id":"bb3fac39-2bc4-4a74-8b4d-18cb5354d34d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"5b7cf4a2-2b1d-4041-9a44-b7680e89591c"}],"parameters":[{"name":"Text","value":"We do not seem to have an outage status yet for this service address, let me get you to an agent that can help","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":3442,"y":1127},"useDynamic":false}},{"id":"0a2f1bcd-847f-4da9-ba5e-09443a426c3f","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2385,"y":1438}}},{"id":"6a0730de-98bd-46f6-a168-5c6844efa519","type":"Transfer","branches":[{"condition":"Error","transition":"0a2f1bcd-847f-4da9-ba5e-09443a426c3f"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/4c102686-7860-4c34-a698-94775c597032","resourceName":"OES Outage Error Handling"}],"metadata":{"position":{"x":2148,"y":1446},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/4c102686-7860-4c34-a698-94775c597032","text":"OES Outage Error Handling"}},"target":"Flow"},{"id":"112156a5-a954-4bf2-95fc-0facea3cf19c","type":"Transfer","branches":[{"condition":"Error","transition":"1408a9f5-4199-4961-8644-9c8895c94f21"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/78e0d1cc-05ee-4268-91fa-7745e0a0737d","resourceName":"OES Outage Reporting"}],"metadata":{"position":{"x":4088,"y":119},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/78e0d1cc-05ee-4268-91fa-7745e0a0737d","text":"OES Outage Reporting"}},"target":"Flow"},{"id":"02b82353-5a50-4839-b808-e9103c3a7407","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e9be6b62-9150-45a6-89ba-6eb7a95a85d7"}],"parameters":[{"name":"Text","value":"Our systems show that the power is $.Attributes.returnedoutageStatus, at the address you confirmed.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2982,"y":27},"useDynamic":false}},{"id":"efa34de1-95ed-4d77-9cd5-4be143f237fe","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e9be6b62-9150-45a6-89ba-6eb7a95a85d7"}],"parameters":[{"name":"Text","value":"Our systems show that the power is $.Attributes.returnedoutageStatus, at the address you confirmed, and that $.Attributes.returnedoutageCount locations in your area are also out. The estimated restoration time will be $.Attributes.returnedoutageETR hours.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2989,"y":196},"useDynamic":false}},{"id":"9b1f0c8d-6a52-4ca2-acf5-0656cdc52c5b","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":3410.127685546875,"y":529.8814086914062}}},{"id":"49f4b81c-93b4-4546-b308-1f8c27598176","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"af7ac968-eae9-4d59-afc9-294f0aa7e99e"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":439,"y":19}}},{"id":"9ff44f5e-18f7-47ff-a206-260e83760dca","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"GreaterThan","conditionValue":"0","transition":"e8ef4774-5d7f-4996-9d84-4ccb54bae0b9"},{"condition":"NoMatch","transition":"e9a3ebee-9c71-474c-8063-c813436a4358"}],"parameters":[{"name":"Attribute","value":"streetNum"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1196,"y":1149},"conditionMetadata":[{"id":"ae4f115c-923e-4b94-944c-e70de0eef12c","operator":{"name":"Is greater than","value":"GreaterThan","shortDisplay":">"},"value":"0"}]}},{"id":"af7ac968-eae9-4d59-afc9-294f0aa7e99e","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"fd0a63d6-323c-465e-84e3-22dbfbcf7274"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":668.1500854492188,"y":20.700000762939453}}},{"id":"d335aa3a-0c9a-45a6-94d0-af352b8c1bfb","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1375,"y":32}}},{"id":"fa465f1a-9975-49f2-abe1-b15749992b33","type":"Transfer","branches":[{"condition":"Error","transition":"d335aa3a-0c9a-45a6-94d0-af352b8c1bfb"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/4c102686-7860-4c34-a698-94775c597032","resourceName":"OES Outage Error Handling"}],"metadata":{"position":{"x":1142,"y":34},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/4c102686-7860-4c34-a698-94775c597032","text":"OES Outage Error Handling"}},"target":"Flow"},{"id":"251a8bed-34a3-4c6a-bdb8-96775b445912","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"1408a9f5-4199-4961-8644-9c8895c94f21"},{"condition":"Error","transition":"1408a9f5-4199-4961-8644-9c8895c94f21"}],"parameters":[],"metadata":{"position":{"x":3941,"y":1023},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"2cba1a95-f071-4171-a862-0e95dc83097d","type":"SetQueue","branches":[{"condition":"Success","transition":"251a8bed-34a3-4c6a-bdb8-96775b445912"},{"condition":"Error","transition":"251a8bed-34a3-4c6a-bdb8-96775b445912"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/queue/5a677514-8fa2-4164-8419-78a9531b7935","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":3710,"y":966},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/queue/5a677514-8fa2-4164-8419-78a9531b7935","text":"BasicQueue"}}},{"id":"e8ef4774-5d7f-4996-9d84-4ccb54bae0b9","type":"PlayPrompt","branches":[{"condition":"Success","transition":"0cde9267-57b4-4cc5-a8ef-de8f2632a107"}],"parameters":[{"name":"Text","value":"We have found your account and will now confirm the address associated. For privacy reason, we will only repeat the street address number.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1200,"y":308},"useDynamic":false}},{"id":"dcb52e73-7dd2-445a-84f3-47a77737e0c1","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e8ef4774-5d7f-4996-9d84-4ccb54bae0b9"}],"parameters":[{"name":"Text","value":"Hello $.External.firstName $.External.lastName, thank you for calling your Hometown Energy Team.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":943,"y":306},"useDynamic":false}},{"id":"7c21fd1c-1705-43a2-8aa7-1272f67ba2f1","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":947.4345092773438,"y":652.40673828125}}},{"id":"c7976cd4-ac7e-4f78-b24c-2645acf82235","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"On","transition":"02b82353-5a50-4839-b808-e9103c3a7407"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Off","transition":"efa34de1-95ed-4d77-9cd5-4be143f237fe"},{"condition":"NoMatch","transition":"bb3fac39-2bc4-4a74-8b4d-18cb5354d34d"}],"parameters":[{"name":"Attribute","value":"returnedoutageStatus"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":2613,"y":55},"conditionMetadata":[{"id":"038f541d-a893-44e1-b17e-32c8df21d837","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"On"},{"id":"5ce0a0d1-9c6d-4daa-9f63-c8762d702b2d","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Off"}]}},{"id":"50315936-dfc3-4d81-b148-b3a062ee0d69","type":"Transfer","branches":[{"condition":"Error","transition":"80ad600d-9282-4153-a09b-f38c0f934b42"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/4c102686-7860-4c34-a698-94775c597032","resourceName":"OES Outage Error Handling"}],"metadata":{"position":{"x":2409,"y":375},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/4c102686-7860-4c34-a698-94775c597032","text":"OES Outage Error Handling"}},"target":"Flow"},{"id":"0cde9267-57b4-4cc5-a8ef-de8f2632a107","type":"SetAttributes","branches":[{"condition":"Success","transition":"8c9847d4-cb19-4bac-9690-9931dbf7ceac"},{"condition":"Error","transition":"50315936-dfc3-4d81-b148-b3a062ee0d69"}],"parameters":[{"name":"Attribute","value":"outageStatus","key":"returnedoutageStatus","namespace":"External"},{"name":"Attribute","value":"outageETR","key":"returnedoutageETR","namespace":"External"},{"name":"Attribute","value":"outageCount","key":"returnedoutageCount","namespace":"External"},{"name":"Attribute","value":"streetNum","key":"returnedstreetNum","namespace":"External"},{"name":"Attribute","value":"firstName","key":"firstName","namespace":"External"},{"name":"Attribute","value":"lastName","key":"lastName","namespace":"External"},{"name":"Attribute","value":"addressCity","key":"returnedaddressCity","namespace":"External"},{"name":"Attribute","value":"addressStreet","key":"returnedaddressStreet","namespace":"External"}],"metadata":{"position":{"x":1451,"y":291}}},{"id":"38494686-db4f-430d-b201-c5dd22c20c12","type":"SetAttributes","branches":[{"condition":"Success","transition":"dcb52e73-7dd2-445a-84f3-47a77737e0c1"},{"condition":"Error","transition":"3c7937bd-3324-49c3-a215-7b0be3d8ec1f"}],"parameters":[{"name":"Attribute","value":"firstName","key":"returnedfirstName","namespace":"External"},{"name":"Attribute","value":"lastName","key":"returnedlastName","namespace":"External"},{"name":"Attribute","value":"Customer Number","key":"collectedNum","namespace":"System"}],"metadata":{"position":{"x":677,"y":313}}},{"id":"fd0a63d6-323c-465e-84e3-22dbfbcf7274","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"72a05262-2156-41ac-95b5-8e6a7259dff8"},{"condition":"Error","transition":"fa465f1a-9975-49f2-abe1-b15749992b33"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:656971979010:function:callerLookup","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":902,"y":25},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"72a05262-2156-41ac-95b5-8e6a7259dff8","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"GreaterThan","conditionValue":"0","transition":"38494686-db4f-430d-b201-c5dd22c20c12"},{"condition":"NoMatch","transition":"db72e701-0417-4893-b35c-2a01c67692ac"}],"parameters":[{"name":"Attribute","value":"streetNum"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":433,"y":309},"conditionMetadata":[{"id":"c064d978-717e-438b-923e-136df948bb18","operator":{"name":"Is greater than","value":"GreaterThan","shortDisplay":">"},"value":"0"}]}},{"id":"031c9246-3b21-47d3-bc50-ee3e3783b052","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"9ff44f5e-18f7-47ff-a206-260e83760dca"},{"condition":"Error","transition":"3c7937bd-3324-49c3-a215-7b0be3d8ec1f"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:656971979010:function:callerLookup","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"collectedNum","value":"Stored customer input","namespace":"System"}],"metadata":{"position":{"x":682,"y":716},"dynamicMetadata":{"collectedNum":true},"useDynamic":false},"target":"Lambda"},{"id":"3c7937bd-3324-49c3-a215-7b0be3d8ec1f","type":"Transfer","branches":[{"condition":"Error","transition":"7c21fd1c-1705-43a2-8aa7-1272f67ba2f1"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/4c102686-7860-4c34-a698-94775c597032","resourceName":"OES Outage Error Handling"}],"metadata":{"position":{"x":941,"y":478},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:656971979010:instance/7bef9566-f161-4c51-bbf7-90d9a862dab9/contact-flow/4c102686-7860-4c34-a698-94775c597032","text":"OES Outage Error Handling"}},"target":"Flow"},{"id":"8c9847d4-cb19-4bac-9690-9931dbf7ceac","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"c7976cd4-ac7e-4f78-b24c-2645acf82235"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"2","transition":"9634d2bd-4797-488d-85f4-4e59a4985240"},{"condition":"Timeout","transition":"50315936-dfc3-4d81-b148-b3a062ee0d69"},{"condition":"NoMatch","transition":"50315936-dfc3-4d81-b148-b3a062ee0d69"},{"condition":"Error","transition":"50315936-dfc3-4d81-b148-b3a062ee0d69"}],"parameters":[{"name":"Text","value":"<speak>\nIs the street address you are calling about \n\n<say-as interpret-as=\"digits\">$.Attributes.returnedstreetNum </say-as>\n\nPress 1 for yes, or 2 for no.\n</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"Timeout","value":"10"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":2059,"y":40},"conditionMetadata":[{"id":"8b53f730-e94d-4745-8d0a-ff4b3ce6cb94","value":"1"},{"id":"f1f87224-3316-4c2d-8978-8328f4f63528","value":"2"}],"useDynamic":false},"target":"Digits"},{"id":"e9a3ebee-9c71-474c-8063-c813436a4358","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"9634d2bd-4797-488d-85f4-4e59a4985240"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"2","transition":"5b7cf4a2-2b1d-4041-9a44-b7680e89591c"},{"condition":"Timeout","transition":"6a0730de-98bd-46f6-a168-5c6844efa519"},{"condition":"NoMatch","transition":"6a0730de-98bd-46f6-a168-5c6844efa519"},{"condition":"Error","transition":"6a0730de-98bd-46f6-a168-5c6844efa519"}],"parameters":[{"name":"Text","value":"We cannot find a service address associated with that phone number.  You may press 1 to try another number, or 2, to speak with a live agent","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":1844,"y":1272},"conditionMetadata":[{"id":"e0e0f545-543f-4092-b189-70481e008977","value":"1"},{"id":"996b9e4e-f361-418e-bae6-afba53186100","value":"2"}],"useDynamic":false},"target":"Digits"},{"id":"3089d4b9-de38-4a69-b089-47fb6a65c58d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9634d2bd-4797-488d-85f4-4e59a4985240"}],"parameters":[{"name":"Text","value":"That is an invalid phone number. Please try again.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":718,"y":1053},"useDynamic":false}},{"id":"e9be6b62-9150-45a6-89ba-6eb7a95a85d7","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"112156a5-a954-4bf2-95fc-0facea3cf19c"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"2","transition":"9634d2bd-4797-488d-85f4-4e59a4985240"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"3","transition":"2cba1a95-f071-4171-a862-0e95dc83097d"},{"condition":"Timeout","transition":"9b1f0c8d-6a52-4ca2-acf5-0656cdc52c5b"},{"condition":"NoMatch","transition":"9b1f0c8d-6a52-4ca2-acf5-0656cdc52c5b"},{"condition":"Error","transition":"9b1f0c8d-6a52-4ca2-acf5-0656cdc52c5b"}],"parameters":[{"name":"Text","value":"If you would like to report a different power status for this location, please press one. If you would like to report or check status for a different location, press two.  If you would like to speak with an Outage specialist, press three.  Otherwise, you may hang up.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":3261,"y":83},"conditionMetadata":[{"id":"17e320f7-5f99-41f2-899e-e8b19767f97b","value":"1"},{"id":"fa26e583-1b74-47d1-a90c-15ced30c9a06","value":"2"},{"id":"3b6ce555-5efb-43d9-9af6-51f3b49666ca","value":"3"}],"useDynamic":false},"target":"Digits"},{"id":"db72e701-0417-4893-b35c-2a01c67692ac","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9634d2bd-4797-488d-85f4-4e59a4985240"}],"parameters":[{"name":"Text","value":"Hello and thank you for calling your Hometown Utility Outage Hotline.  We cannot locate a service address associated with the number you are calling from.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":107,"y":740},"useDynamic":false}},{"id":"9634d2bd-4797-488d-85f4-4e59a4985240","type":"StoreUserInput","branches":[{"condition":"Success","transition":"031c9246-3b21-47d3-bc50-ee3e3783b052"},{"condition":"InvalidNumber","transition":"3089d4b9-de38-4a69-b089-47fb6a65c58d"},{"condition":"Error","transition":"3c7937bd-3324-49c3-a215-7b0be3d8ec1f"}],"parameters":[{"name":"Text","value":"Please enter the 10 digit phone number associated with the service address you are calling about."},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"PhoneNumber"},{"name":"Timeout","value":"5"},{"name":"PhoneNumberFormat","value":"Local"},{"name":"CountryCode","value":"US"}],"metadata":{"position":{"x":407,"y":761},"useDynamic":false,"useDynamicForEncryptionKeys":true,"countryCodePrefix":"+1"}}],"version":"1","type":"contactFlow","start":"8fbbc240-12ee-47b7-9aa3-4c92b2f4ea45","metadata":{"entryPointPosition":{"x":20,"y":20},"snapToGrid":false,"name":"OES Outage Hotline Main","description":"OES Outage Hotline - Main Flow 2","type":"contactFlow","status":"published","hash":"ecb2f9a72e06cdc09b475b8bda0f91eceacc20f3ba03c9d178d5922266a24ba6"}}